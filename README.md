# RectifiedHR â€“ High-Resolution Diffusion via Energy Profiling and Adaptive Guidance Scheduling

A research project focused on improving high-resolution image quality generated by latent diffusion models (Stable Diffusion 1.5) through energy profiling and adaptive guidance scheduling.

## ğŸ¯ Project Goal

To analyze and improve high-resolution image quality generated by latent diffusion via:
- Measuring latent energy evolution across denoising steps
- Proposing rectified/adaptive guidance schedules (dynamic CFG)
- Producing visually and quantitatively better high-res images

## ğŸ“¦ Deliverables
- **Paper**: LaTeX source and PDF in `paper/`
- **Figures**: All referenced images in `paper/figures/`
- **Reproducible Experiments**: Scripts and configs to regenerate results

## ğŸ—‚ï¸ Project Structure
```
RectifiedHR-1/
â”œâ”€â”€ run_experiments.py         # Main script: run all experiments for the paper
â”œâ”€â”€ run_single_experiment.py   # Run a single experiment (prompt/config)
â”œâ”€â”€ src/                      # Core modules (generation, energy profiling, adaptive CFG, metrics)
â”œâ”€â”€ utils/                    # Plotting and helper functions
â”œâ”€â”€ experiments/              # Output images/data (minimal, only referenced results)
â”œâ”€â”€ paper/                    # LaTeX, figures, final PDF
â”‚   â”œâ”€â”€ paper.tex
â”‚   â”œâ”€â”€ rectifiedhr.pdf
â”‚   â””â”€â”€ figures/
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ LICENSE
â””â”€â”€ README.md
```

## ğŸš€ Getting Started

1. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

2. **Run all experiments (reproduce paper results):**
   ```bash
   python run_experiments.py --config configs/full_experiment.yaml
   ```
   *(Edit the config or script as needed for your hardware/prompts.)*

3. **Run a single experiment:**
   ```bash
   python run_single_experiment.py --prompt "A beautiful landscape..." --cfg_scale 10 --sampler ddim
   ```

4. **Reproduce paper figures:**
   - All images referenced in the paper are in `paper/figures/`.
   - To regenerate, rerun the above scripts with the same prompts/configs.
   - Compile the paper with:
     ```bash
     cd paper
     pdflatex paper.tex
     bibtex paper
     pdflatex paper.tex
     pdflatex paper.tex
     ```

## ğŸ“Š Results
- Improved high-resolution image quality (512Ã—512)
- Reduced artifacts and improved detail
- Quantitative improvements in CLIP and MS-SSIM scores
- Energy trajectory analysis showing stabilization

## ğŸ“„ Citation
If you use this work, please cite:
```
@article{Sanjyal2024RectifiedHR,
  title={RectifiedHR: High-Resolution Diffusion via Energy Profiling and Adaptive Guidance Scheduling},
  author={Ankit Sanjyal},
  journal={arXiv preprint arXiv:XXXX.XXXXX},
  year={2024}
}
```

## ğŸ“š Paper
- [arXiv link (to be added)](https://arxiv.org/abs/XXXX.XXXXX)
- See `paper/rectifiedhr.pdf` for the full manuscript.

## ğŸ“ License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ¤ Contributing
For questions or contributions, please open an issue or submit a pull request.