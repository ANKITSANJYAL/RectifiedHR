# RectifiedHR – High-Resolution Diffusion via Energy Profiling and Adaptive Guidance Scheduling

A research project focused on improving high-resolution image quality generated by latent diffusion models (Stable Diffusion 1.5) through energy profiling and adaptive guidance scheduling.

## 🎯 Project Goal

To analyze and improve high-resolution image quality generated by latent diffusion via:
- Measuring latent energy evolution across denoising steps
- Proposing rectified/adaptive guidance schedules (dynamic CFG)
- Producing visually and quantitatively better high-res images

## 📦 Deliverables
- **Paper**: LaTeX source and PDF in `paper/`
- **Figures**: All referenced images in `paper/figures/`
- **Reproducible Experiments**: Scripts and configs to regenerate results

## 🗂️ Project Structure
```
RectifiedHR-1/
├── run_experiments.py         # Main script: run all experiments for the paper
├── run_single_experiment.py   # Run a single experiment (prompt/config)
├── src/                      # Core modules (generation, energy profiling, adaptive CFG, metrics)
├── utils/                    # Plotting and helper functions
├── experiments/              # Output images/data (minimal, only referenced results)
├── paper/                    # LaTeX, figures, final PDF
│   ├── paper.tex
│   ├── rectifiedhr.pdf
│   └── figures/
├── requirements.txt
├── LICENSE
└── README.md
```

## 🚀 Getting Started

1. **Install dependencies**:
   ```bash
   pip install -r requirements.txt
   ```

2. **Run all experiments (reproduce paper results):**
   ```bash
   python run_experiments.py --config configs/full_experiment.yaml
   ```
   *(Edit the config or script as needed for your hardware/prompts.)*

3. **Run a single experiment:**
   ```bash
   python run_single_experiment.py --prompt "A beautiful landscape..." --cfg_scale 10 --sampler ddim
   ```

4. **Reproduce paper figures:**
   - All images referenced in the paper are in `paper/figures/`.
   - To regenerate, rerun the above scripts with the same prompts/configs.
   - Compile the paper with:
     ```bash
     cd paper
     pdflatex paper.tex
     bibtex paper
     pdflatex paper.tex
     pdflatex paper.tex
     ```

## 📊 Results
- Improved high-resolution image quality (512×512)
- Reduced artifacts and improved detail
- Quantitative improvements in CLIP and MS-SSIM scores
- Energy trajectory analysis showing stabilization

## 📄 Citation
If you use this work, please cite:
```
@article{Sanjyal2024RectifiedHR,
  title={RectifiedHR: High-Resolution Diffusion via Energy Profiling and Adaptive Guidance Scheduling},
  author={Ankit Sanjyal},
  journal={arXiv preprint arXiv:XXXX.XXXXX},
  year={2024}
}
```

## 📚 Paper
- [arXiv link (to be added)](https://arxiv.org/abs/XXXX.XXXXX)
- See `paper/rectifiedhr.pdf` for the full manuscript.

## 📝 License
This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 🤝 Contributing
For questions or contributions, please open an issue or submit a pull request.